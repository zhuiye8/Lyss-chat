### **“Lyss AI Platform” 项目启动行动清单**

#### **阶段一：奠定基石 —— 架构定义与核心文档**

这个阶段的目标是建立项目的“宪法”和“城市规划”，确保所有后续开发都有章可循。

* **☑ 1.1. 定义微服务边界 (Define Microservice Boundaries)**  
  * 根据我们的蓝图，初步划分出核心的微服务。这有助于我们隔离复杂性。  
    * **用户服务 (User Service)**: 负责用户注册、登录、信息管理。  
    * **认证服务 (Auth Service)**: 专门负责JWT的生成与验证。  
    * **群组服务 (Group Service)**: 负责群组的创建、成员关系、权限管理。  
    * **凭证服务 (Credential Service)**: 负责个人和群组API Key的安全存储与管理。  
    * **网关服务 (Gateway Service)**: 核心AI请求的入口，负责路由、调用上游供应商。  
    * **计费服务 (Billing/Consumption Service)**: 负责记录Token用量和计算成本。  
* **☑ 1.2. 制定《统一技术规范文档》**  
  * 这是最重要的文档，是保证所有AI（或开发者）协作一致的基石。  
  * **内容应包含：**  
    * **API设计规范**: 明确RESTful风格细节、URL结构、HTTP动词使用、统一的成功/错误响应格式等。  
    * **数据库设计规范**: 命名约定（表、字段）、数据类型选择、索引使用原则。  
    * **编码风格指南**: 根据我们选择的主要编程语言（如Go, Python），规定代码格式、命名风格、注释标准。  
    * **日志记录规范**: 统一日志级别（INFO, WARN, ERROR）和JSON输出格式。  
* **☑ 1.3. 设计跨服务通信协议**  
  * 决定微服务之间如何对话。  
  * **同步通信**: 使用RESTful API调用（简单直接，但存在服务强耦合）。  
  * **异步通信**: 使用消息队列（如RabbitMQ, Kafka），用于非即时任务，如“用户加入群组后发送通知”。  
  * **决策**: 我们需要为不同场景选择合适的通信方式。

---

#### **阶段二：技术选型与参考项目调研**

这个阶段，我们针对您提出的具体技术和项目，进行深入分析并做出选择。

* **☑ 2.1. 凭证与网关层 \- 深入分析 one-api**  
  * **目标**: 学习其设计，而非直接使用。  
  * **调研要点**:  
    * 它的数据库是如何设计凭证、渠道、令牌和用户关系的？  
    * 它支持多种供应商的适配器(Adapter)模式是如何实现的？  
    * 它的请求路由和负载均衡逻辑是怎样的？  
* **☑ 2.2. 记忆服务 \- 评估 GPTCache 及备选方案**  
  * **目标**: 为我们的记忆服务选择一个合适的、可独立部署的开源引擎。  
  * **调研要点**:  
    * GPTCache 的缓存键设计、部署模式和性能如何？
    * 如何结合动态滑动窗口实现会话内短期记忆？
    * 评估标准：部署简单、API清晰、社区活跃度、与我们技术栈的兼容性。  
* **☑ 2.3. 前端UI组件 \- 参考 Open WebUI**  
  * **目标**: 借鉴成熟的前端交互设计。  
  * **调研要点**:  
    * 分析其“模型选择器”组件的用户体验和功能。  
    * 研究其聊天界面的布局和交互流程。  
* **☑ 2.4. 核心AI引擎 \- 澄清 EINO 的适用性**  
  * **结论**: 您判断得很准。EINO是一个**AI Agent或工作流编排框架**，用于构建需要多步思考、调用多个工具的复杂智能体。  
  * **决策**: 对于我们V1.0的“代理网关+管理”模式，EINO过于复杂，**不适用**。我们目前需要的只是一个更直接的请求转发和管理层。

---

#### **阶段三：开发环境与工具链准备**

这个阶段是动手前的最后准备，确保我们的“施工现场”是标准化的。

* **☐ 3.1. 确定核心技术栈**  
  * **后端语言**: Go (高性能、并发好) / Python (生态好、开发快) / Node.js (全栈统一)？我们需要做出选择。  
  * **数据库**: PostgreSQL (功能强大) / MySQL (广泛使用)？  
  * **前端框架**: Vue / React / Svelte?  
* **☐ 3.2. 搭建版本控制系统 (Git)**  
  * 在GitHub或GitLab上创建项目，并建立清晰的分支策略（例如，main主分支, develop开发分支, feature/xxx功能分支）。  
* **☐ 3.3. 准备容器化环境 (Docker)**  
  * 为每个微服务创建标准的 Dockerfile 模板。  
  * 编写一个 docker-compose.yml 文件，以便任何开发者（或AI）都能在本地一键启动整个项目的开发环境。

---

#### **阶段四：制定实施路线图 (第一个冲刺)**

这个阶段是规划我们具体先写哪部分代码。

* **☐ 4.1. 规划 MVP (最小可行产品) 功能闭环**  
  * **第一步: 用户服务 \+ 认证服务**: 实现用户注册、登录，拿到JWT。  
  * **第二步: 凭证服务**: 实现最简单的“添加个人供应商凭证”功能。  
  * **第三步: 网关服务**: 实现最简单的请求代理功能，能使用用户提交的凭证调用一个真实的AI模型（如OpenAI）。  
  * **目标**: 完成这三步，我们就拥有了一个最核心的、可以验证的流程：“**一个用户可以注册登录，配置自己的Key，并成功完成一次AI对话**”。
* **☐ 4.2. 规划 V1.1 迭代功能**
  * **群组与协作**: 实现群组、成员、角色与权限管理。
  * **高级功能**: 实现工具调用、记忆服务等。